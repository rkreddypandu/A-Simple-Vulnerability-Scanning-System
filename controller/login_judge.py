from flask import request, session
from entity.user import User
from dao.userdao import UserDAO
from .md5_fun import md5



#获取前端传过来的用户名和密码
#调用查询函数和数据库中的用户名和密码进行查询
userDAO = UserDAO()
def Login_judge():
    userName = request.form['username']
    userPwd  = request.form['password']
    if userName != "" and userPwd != "":
        user = User()
        user.userName = userName
        user.userPwd  = md5(userPwd)
        result = userDAO.getUserByUserNameAndPwd(user)
        if result != None:
            print(result)
            session['userName'] = userName
            session['roleid'] = result[0]
            print(session['userName'])
            return result
        else:
            return result



