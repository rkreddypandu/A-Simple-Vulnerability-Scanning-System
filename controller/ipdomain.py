import nmap


def nmapip(hostip):
    nm = nmap.PortScanner()
    # 配置nmap扫描参数
    scan_raw_result = nm.scan(hosts=hostip, arguments='-p 80 -Pn')
    # 分析扫描结果
    for host in scan_raw_result['scan'].items():
        return host[0]



def iptodomain(network_prefix):
    print(network_prefix)
    if 'http://' in network_prefix or 'https://' in network_prefix:
        domain = network_prefix.split('://')
        if '/' in domain[1]:
            domain1 = domain[1].split('/')
            print(domain1)
            print(type(domain1[0]))
            res = nmapip(domain1[0])
            return res
        else:
            res = nmapip(domain[1])
            return res
    else:
        if '/' in network_prefix:
            domain = network_prefix.split('/')
            res = nmapip(domain[0])
            return res

        else:
            res = nmapip(network_prefix)
            return res




